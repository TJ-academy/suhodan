<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="legend">

	<select id="list" resultType="com.example.suhodan.legend.LegendDTO">
		select * from suho_legend order by legend_id
	</select>
	
	<select id="listPaging" resultType="com.example.suhodan.legend.LegendDTO">
	    SELECT * FROM (
	        SELECT ROWNUM AS rnum, a.*
	        FROM (
	            SELECT * FROM suho_legend ORDER BY legend_id DESC
	        ) a
	        WHERE ROWNUM &lt;= #{end}
	    )
	    WHERE rnum &gt;= #{start}
	</select>
	
	<select id="getTotalCount" resultType="int">
	    SELECT COUNT(*) FROM suho_legend
	</select>

	<insert id="insert">
		insert into suho_legend (legend_id, title, story, tts_audio, img, location, reg_date, source) 
		values (suho_legend_seq.nextval, #{title}, #{story}, #{ttsAudioFileName}, #{imgFileName}, #{location}, sysdate, #{source})
	</insert>

	<update id="update">
		update suho_legend
		set title = #{title}, location = #{location}, story = #{story}, img = #{img}, tts_audio = #{tts_audio}
		where legend_id = #{legend_id} 
	</update>

	<delete id="delete">
		delete from suho_legend where legend_id = #{legend_id}
	</delete>

	<select id="detail" resultType="com.example.suhodan.legend.LegendDTO">
		select * from suho_legend where legend_id=#{legend_id}
	</select>

	<select id="list_location" resultType="com.example.suhodan.legend.LegendDTO">
		select * from suho_legend
		where location like '%' || #{location} || '%'
	</select>

</mapper>